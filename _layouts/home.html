<!DOCTYPE html>
<html lang="{{ site.language | default: "en" }}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ site.title }}{% if site.subtitle and site.subtitle != "" %} - {{ site.subtitle }}{% endif %}</title>
  <meta property="og:image" content="{{ "/assets/images/thumbnail.png" | absolute_url }}" />
  <meta name="twitter:image" content="{{ "/assets/images/thumbnail.png" | absolute_url }}" />
  <link rel="icon" type="image/png" href="{{ "/assets/logo.ico/favicon-32x32.png" | relative_url }}" sizes="32x32" />
  <link rel="icon" type="image/png" href="{{ "/assets/logo.ico/favicon-16x16.png" | relative_url }}" sizes="16x16" />
  <link rel="shortcut icon" href="{{ "/assets/logo.ico/favicon.ico" | relative_url }}" />
  <link rel="apple-touch-icon" sizes="180x180" href="{{ "/assets/logo.ico/apple-touch-icon.png" | relative_url }}" />
  <link rel="manifest" href="{{ "/assets/logo.ico/site.webmanifest" | relative_url }}" />
  <link rel="stylesheet" href="{{ "/assets/css/main.css" | relative_url }}">
</head>
<body>

  <div class="circles-viewport">
    <div class="circle"></div>
    <div class="circle circle-2"></div>
    <div class="circle circle-3"></div>
    <div class="circle circle-4"></div>
    <div class="circle circle-5"></div>
  </div>

    <main class="blog-index">
      <div class="posts-header">
        <h1 class="sticker-text">Posts</h1>
        
        <!-- SVG Filter Definition -->
        <svg class="sr-only">
          <filter id="sticker" color-interpolation-filters="sRGB">
            <feGaussianBlur in="SourceAlpha" stdDeviation="1.5" result="blur"></feGaussianBlur>
            <feSpecularLighting in="blur" surfaceScale="5" specularConstant="0" specularExponent="40" lighting-color="#E0E5E9" result="specular">
                <fePointLight x="0" y="0" z="80"></fePointLight>
            </feSpecularLighting>
            <feComposite in="specular" in2="SourceAlpha" operator="in" result="specularMasked"></feComposite>
            <feComposite in="SourceGraphic" in2="specularMasked" operator="arithmetic" k1="0.5" k2="1" k3="1" k4="0"></feComposite>
          </filter>
        </svg>

        <div id="digital-clock" class="digital-clock"></div>
      </div>
      <script src="{{ "/assets/js/sticker-effect.js" | relative_url }}"></script>
      <script src="{{ "/assets/js/boids.js" | relative_url }}"></script>

      {% for post in paginator.posts %}
        <article class="post-item">
          <h2 class="post-title"><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h2>

          <div class="post-meta">
            <span class="post-date">{{ post.date | date: "%Y-%m-%d" }} {% assign w = post.date | date: "%u" | minus: 1 %}{% assign days = "월요일,화요일,수요일,목요일,금요일,토요일,일요일" | split: "," %}{{ days[w] }}</span>
          </div>
        </article>
      {% endfor %}
    </main>

    <div class="pagination">
      {% if paginator.previous_page %}
        <a href="{{ paginator.previous_page_path | relative_url }}">&lt;</a>
      {% else %}
        <span>&lt;</span>
      {% endif %}

      {% if paginator.total_pages <= 5 %}
        {% for page in (1..paginator.total_pages) %}
          {% if page == paginator.page %}
            <span class="current">{{ page }}</span>
          {% elsif page == 1 %}
            <a href="{{ '/' | relative_url }}">{{ page }}</a>
          {% else %}
            <a href="{{ site.paginate_path | default: '/page:num/' | relative_url | replace: ':num', page }}">{{ page }}</a>
          {% endif %}
        {% endfor %}
      {% else %}
        
        {% if paginator.page == 1 %}
          <span class="current">1</span>
        {% else %}
          <a href="{{ '/' | relative_url }}">1</a>
        {% endif %}

        {% assign start_window = paginator.page | minus: 1 %}
        {% assign end_window = paginator.page | plus: 1 %}
        
        {% if start_window > 2 %}
          <span>...</span>
        {% endif %}

        {% for page in (2..paginator.total_pages) %}
           {% if page == paginator.total_pages %}
             {% continue %}
           {% endif %}
           
           {% if page >= start_window and page <= end_window %}
             {% if page == paginator.page %}
               <span class="current">{{ page }}</span>
             {% else %}
               <a href="{{ site.paginate_path | default: '/page:num/' | relative_url | replace: ':num', page }}">{{ page }}</a>
             {% endif %}
           {% endif %}
        {% endfor %}

        {% assign total_minus_one = paginator.total_pages | minus: 1 %}
        {% if end_window < total_minus_one %}
          <span>...</span>
        {% endif %}

        {% if paginator.page == paginator.total_pages %}
          <span class="current">{{ paginator.total_pages }}</span>
        {% else %}
          <a href="{{ site.paginate_path | default: '/page:num/' | relative_url | replace: ':num', paginator.total_pages }}">{{ paginator.total_pages }}</a>
        {% endif %}

      {% endif %}

      {% if paginator.next_page %}
        <a href="{{ paginator.next_page_path | relative_url }}">&gt;</a>
      {% else %}
        <span>&gt;</span>
      {% endif %}
    </div>

    <script>
      function updateClock() {
        const now = new Date();
        const days = ['일요일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일'];
        const dayName = days[now.getDay()];
        const timeString = now.toLocaleTimeString('en-US', { hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit' });
        document.getElementById('digital-clock').textContent = `${dayName} ${timeString}`;
      }
      setInterval(updateClock, 1000);
      updateClock(); // Initial call to avoid delay
    </script>

</body>
</html>